const API_KEY="api_key=dc140afe3fd3a251c2fdf9dcd835be5c";import $ from"jquery";import category from"./templates/photos.handlebars";import styles from"./css/styles.css";function displayCategories(t){var o=document.getElementById("categoryList");const e=["General","Natural","Macro","Portrait","Sport","Astrophotography"];o.innerHTML="",window.addEventListener("beforeunload",(function(){this.localStorage.setItem("categories",JSON.stringify(e))}));let i=JSON.parse(localStorage.getItem("categories"))||e;""!=t?(i.push(t),localStorage.setItem("categories",JSON.stringify(i))):localStorage.setItem("categories",JSON.stringify(e)),console.log("categories: ",i),console.log("category: ",i);let s=category({categories:i});o.innerHTML=s}function fetchPhoto(t,o){$("#photos").empty(),t.photos.photo.map((t=>({id:t.id,title:t.title}))).slice(0,o).forEach((t=>{getSizes(t)}))}function getSizes(t){let o="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&format=json&nojsoncallback=1&"+API_KEY+"&photo_id="+t.id;$.get(o,(function(o){displayPhoto([{file:o.sizes.size[1].source,title:t.title}])}))}function displayPhoto(t){let o=`<div class="photo-box">\n                     <figure data-full="${t[0].file}">\n                        <img src="${t[0].file}" alt="${t[0].title}">\n                        <figcaption>${t[0].title}</figcaption>\n                    </figure>\n                   </div>`;$("#photos").append(o),$("figure").last().click((function(){$("#modal-container").css("display","block"),$("#modal-content").attr("src",$(this).attr("data-full")),$("#modal-caption").text(t[0].title)}))}$(document).ready((function(){displayCategories(""),$("#myForm").submit((function(t){t.preventDefault();const o=$("#numberThumb").val();console.log("input: ",o),displayCategories(o);let e=`https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=dc140afe3fd3a251c2fdf9dcd835be5c&text="${o}"&per_page=20&format=json&nojsoncallback=1`;$.get(e,(function(t){0==t.photos.photo.length?alert("no matched text"):fetchPhoto(t,t.photos.photo.length)})),$("#modal-close").click((function(){console.log("close clicked"),$("#modal-container").css("display","none"),$("#modal-content").attr("src","")}))}))}),"json");